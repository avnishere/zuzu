<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Govt. of Bihar</title>

  

    <!-- Custom CSS -->
    <link href="../css/sb-admin-2.css" rel="stylesheet">
	
	<!-- MetisMenu CSS -->
    <link href="../css/metisMenu.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../css/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	
	  <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	

	
</head>

<body style="margin-top:80px; background:url('../img/rough_diagonal.png');margin-bottom:80px">

    <div id="wrapper" style="background:url('../img/rough_diagonal.png');">
	
	        	     <!-- Navigation -->
			<nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="margin-bottom:0')">
				<div class="navbar-header" style="">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
                <a class="navbar-brand" href="index.html"><img src="../img/sb.png" class="img-responsive" alt="Home" height="50" width="50"></a>
				<a class="navbar-brand" href="index.html"><i class="hidden-xs"><img src="../img/top-welfare1.jpg" class="img-responsive" alt="Home" width="275"></i></a>
				<a class="navbar-brand" href="index.html"><img src="../img/NSAP1.png" class="img-responsive" alt="NSAP" height="60" width="60"></a>
				<a class="navbar-brand" href="index.html" style= "color:#dfdfdf; text-shadow:1px 1px Black; padding-bottom:0px;padding-top:15px">
					<b class="hidden-xs"><p style="font-size:20px">NATIONAL</p>
						<p style="font-size:16px">SOCIAL&nbsp;&nbsp; ASSISTANCE&nbsp;&nbsp; PROGRAMME</p>
					</b>
				</a>
				</div>
            <!-- /.navbar-header -->

				<ul class="nav navbar-top-links navbar-right" style="margin-right:10px">
					<div class="btn-group">
						<button type="button" class="btn btn-primary"><i class="fa fa-home"></i>&nbsp;<b class="hidden-xs">Home</b></button>
						<button type="button" class="btn btn-primary"><i class="fa fa-tasks"></i>&nbsp;<b class="hidden-xs">Schemes</b></button>
						<button type="button" class="btn btn-primary"><i class="fa fa-support"></i>&nbsp;<b class="hidden-xs">Help</b></button>
						<button type="button" class="btn btn-primary"><i class="fa fa-user"></i>&nbsp;<b class="hidden-xs">Logout</b></button>
					</div>
             
				</ul>
            <!-- /.navbar-top-links -->

				
            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li>
                            <a href="/dashboard"><i class="fa fa-dashboard fa-fw"></i> DASHBOARD</a>
                        </li>
                        <li>
                            <a href="/aadhaar"><i class="fa fa-check fa-fw"></i> AADHAAR VALIDATION</a>
                        </li>
                        <li>
                            <a><i class="fa fa-table fa-fw"></i> PENSION SCHEDULER<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="/pension_auto">AUTOMATIC</a>
                                </li>
                                <li>
                                    <a href="/pension_manual">MANUAL</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="/payment_folder"><i class="fa fa-edit fa-fw"></i> PAYMENT FOLDER</a>
                        </li>
                        <li>
                            <a href="/reports"><i class="fa fa-book fa-fw"></i> REPORTS</a>

                        </li>
                        <li>
                            <a href="/passbook"><i class="fa fa-archive fa-fw"></i> E-PASSBOOK</a>

                        </li>
                        <li>
                            <a href="/allotment"><i class="fa fa-arrow-circle-o-up fa-fw"></i> ALLOTMENT</a>

                        </li>
                        <li>
                            <a href="http://www.icicibank.com"><i class="fa fa-link fa-fw"></i> PFMS-BANK DASHBOARD</a>

                        </li>
                        <li>
                            <a href="/uc"><i class="fa fa-trello fa-fw"></i> UC</a>

                        </li>
                        <li>
                            <a href="/sanction"><i class="fa fa-briefcase fa-fw"></i> SANCTION</a>

                        </li>
                        <li>
                            <a href="/sanct_allot"><i class="fa fa-book fa-fw"></i> SANCTION & ALLOTMENT</a>

                        </li>
                        <li>
                            <a href="http://www.bihar.gov.in"> <img src="../img/bihar-district-map.png" class="img-responsive" style="width=120px; height:80px"></a>
                        </li>
                    </ul>
                </div>
					<!-- /.sidebar-collapse -->
				</div>
				<!-- /.navbar-static-side -->
			</nav>
		
			<nav class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">	
				<div class="navbar-footer" style="font-family: Verdana; margin-top:10px; margin-left:10px;">
					<a href="#" style="color:#000">Terms of Service</a> | <a href="#" style="color:#000">Privacy</a>
						&nbsp;Â© 2017 ICICI Bank. All rights reserved
				</div>
				<a href="http://www.icicibank.com" class="pull-right">
					<img src="../img/image.jpg" style="height:20px; margin-right:10px; margin-top:-30px">
				</a>
			</nav>
			<!---navigation -->


	 
        <div id="page-wrapper" style="background:url('../img/rough_diagonal.png');">
		
			<div class="row">
				<div class="col-sm-5">
		
					<div class="panel-heading panel-default" style="background-color:Grey; color:#fff;">
						<table class="table table-condensed table-responsive">
						<thead>
						<tr>
							<th>
								<select class="form-control" style="width:120px"><option selected="selected">Select District</option>
                                <option>Beguserai</option>
                                <option>Madhepura</option>
                                <option>Saharsa</option>
                                <option>Patna</option>
                                </select>
							</th>
							<th>
								<select class="form-control"><option selected="selected">Select Block</option>
                                <option>Madhai</option>
                                <option>Patali</option>
                                <option>Digha</option>
                                <option>Saktipur</option>
                                </select>
							</th>
							<th>
								<a class="btn btn-primary btn-block" id="submit" onclick="showhide()">Submit</a>
							</th>
                            <th>
                                <a class="btn btn-primary btn-block"  onclick="seeAll()">See all approved Items</a>
                            </th>
                            <th>
                                <form id="file-form" action="fileUpload.php" method="post" enctype="multipart/form-data">
                                    Upload a File:
                                    <input type="file" id="myfile" name="myfile">
                                    <input type="submit" id="submit" name="submit" value="Upload File Now" >
                                </form>

                                <p id="status"></p>
                            </th>

						</tr>
						</thead>
						</table>
						
					</div>
					<!-- panel-heading -->
					
				</div>
				
			</div><br>
			<!-- row1 -->
			
			<span id="table">
                                <p>Uploaded :</p>
			<div class="row" id="TableApproved">
                    <div class="col-sm-10">
                        <table id="myTable" class="table" id="actual_table" border="1" style="background-color:#fff">

                        </table>
                    </div>
            </div>

			<div class="row">
				
				<div class="col-sm-7">
                        <input type="text" class="form-control" placeholder="*Remarks" style="width:200px">
                </div>
                <div class="col-sm-3">
                        <button class="btn btn-primary " Style="width:150px;" onclick="myFunction()">Approve</button>
                </div>
				
			</div>
                <p>Approved :</p>
                 <div class="row" >
                    <div class="col-sm-10" id="myTableAll">

                    </div>
                </div>
			</span>
		
		
		
		
		</div>
		<!-- page wrapper -->
		
	</div>
	<!-- wrapper -->
	
</body>



	<!-- jQuery -->
	<script src="../js/jquery.js"></script>
    <script src="../js/jquery-ui.min.js"></script>
	<script src="../js/jquery.min.js"></script>
	
    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

	
	<!-- Charts JavaScript -->
	<script type="text/javascript" src="../js/chart.js"></script>
	<!-- Use this for editing chart data -->
    <script type="text/javascript" src="../js/graphs.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="../js/sb-admin-2.js"></script>
	    <!-- Metis Menu Plugin JavaScript -->
    <script src="../js/metisMenu.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js"></script>
	
	
<script type="text/javascript">
       function showhide()
 {
       var div = document.getElementById("table");
if (div.style.display !== "none") {
    div.style.display = "block";
}
else {
    div.style.display = "block";
}
 }
</script>

<script>
	   
	   function toggle(source) {
  checkboxes = document.getElementsByName('foo');
  for(var i=0, n=checkboxes.length;i<n;i++) {
    checkboxes[i].checked = source.checked;
  }
}
	   
</script>

	<script>function myFunction() {

        localStorage.setItem('testObject' + key, JSON.stringify(data));
        key  = key + 1;
        localStorage.setItem("KeySaved", key);
        alert("Successfully approved and saved in database");
    }</script>

<script>
    var data = [];
    var key = 0;
    var form = document.getElementById('file-form');
    var fileSelect = document.getElementById('myfile');
    var uploadButton = document.getElementById('submit');
    var statusDiv = document.getElementById('status');

    form.onsubmit = function(event) {
        event.preventDefault();

        statusDiv.innerHTML = 'Uploading.......';

        // Get the files from the input
        var files = fileSelect.files;

        // Create a new FormData object.
        var formData = new FormData();

        //Grab just one file, since we are not allowing multiple file uploads
        var file = files[0];

        //Check the file type

        if (file.size >= 2000000 ) {
            statusDiv.innerHTML = 'This file is larger than 2MB. Sorry, it cannot be uploaded.';
            return;
        }

        // Add the file to the request.
        formData.append('myfile', file, file.name);

        // Set up the AJAX request.
        var xhr = new XMLHttpRequest();
        console.log("here");
        // Open the connection.
        xhr.open('POST', '/excel', true);


        // Set up a handler for when the request finishes.
        xhr.onload = function () {
            if (xhr.status === 200) {
                statusDiv.innerHTML = 'The file uploaded successfully.......';
                var result = JSON.parse(xhr.response);
                data = result;
                var table = document.getElementById("myTable");
                result.forEach(function (value,key) {
                    var row = table.insertRow(key);
                    if(key === 0){
                        row.className = "bgcolor";
                    }
                    var i = 0;
                    for(var key in value){
                        var cell = row.insertCell(i);
                        if(i === 0){
                            cell.innerHTML = key;
                        }else{
                            cell.innerHTML = value[key];
                        }
                    }
                    i = i + 1;
                });
            } else {
                statusDiv.innerHTML = 'An error occurred while uploading the file. Try again';
            }
        };

        // Send the Data.
        xhr.send(formData);
    }

</script>
<script>

    function seeAll() {
        var getSavedKey = localStorage.getItem("KeySaved");
        var docTable = document.getElementById("myTableAll");
        for(var i= 0; i <= getSavedKey; i++){
            var getData = JSON.parse(localStorage.getItem("testObject" + i));
            var docTable = document.getElementById("myTableAll");
            docTable.innerHTML = "<table id='fillMe" + i + "'</table>";
            var tableId = document.getElementById("fillMe" + i);
            tableId.className = "table MarginSee";
            console.log(getData,i,key);
            getData.forEach(function (value,key) {
                var row = tableId.insertRow(key);
                if(key === 0){
                    row.className = "bgcolor";
                }
                var d = 0;
                for(var key in value){
                    var cell = row.insertCell(d);
                    if(d === 0){
                        cell.innerHTML = key;
                    }else{
                        cell.innerHTML = value[key];
                    }
                }
                d = d + 1;
            });
        }

    }


</script>

</html>